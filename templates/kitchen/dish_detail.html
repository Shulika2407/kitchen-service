{% extends "base.html" %}
{% block content %}
  <h1>
    {{ dish.name }}
    <a href="{% url 'kitchen:dish-update' pk=dish.id%}" class="btn btn-primary link-to-page">
      Update
    </a>
    <a href="{% url 'kitchen:dish-delete' pk=dish.id%}" class="btn btn-primary link-to-page">
      Delete
    </a>
  </h1>
  <p>Dish Type: {{ dish.dish_type.name }}</p>
  <section>
    <h3>
      Cooks:
      {% if dish in user.dishes.all %}
        <a href="{% url 'kitchen:toggle-dish-assign' pk=dish.id %}" class="btn btn-danger link-to-page">
          Delete me from this dish
        </a>
      {% else %}
        <a href="{% url 'kitchen:toggle-dish-assign' pk=dish.id %}" class="btn btn-success link-to-page">
          Assign me from this dish
        </a>
      {% endif %}
    </h3>

    <ul>
      {% for cook in dish.cooks.all %}
        <li>{{ cook.username }} ({{ cook.first_name }} {{ cook.last_name }})</li>
        {% empty %}
        <li>No cooks assigned.</li>
      {% endfor %}
    </ul>
  </section>
  <hr>

  <section>
    <h3>Ingredients:</h3>
    <ul>
      {% for ingredient in dish.ingredients.all %}
        <li>{{ ingredient.name }} â€” {{ ingredient.calories_per_100g }} kcal/100g</li>
        <br>
      {% endfor %}
    </ul>
  </section>

{% endblock %}